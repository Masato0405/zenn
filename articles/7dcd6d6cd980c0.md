---
title: "ã€Laravelã€‘çµ‚äº†å‡¦ç†ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’è©¦ã—ã¦ã¿ã‚‹"
emoji: "ğŸ¥ª"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["PHP", "Laravel"]
published: false
---

- å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã‚‹
    - ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ä½œæˆ
    - å‡¦ç†ã®è¨˜è¿°ï¼ˆãƒ­ã‚°ã‹ãªï¼‰
    - å®Ÿè¡Œ
ã•ã„ã”ã«

# ã“ã®è¨˜äº‹ã«ã¤ã„ã¦
Laravelã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®çµ‚äº†å‡¦ç†ï¼ˆ`terminate`ãƒ¡ã‚½ãƒƒãƒ‰ï¼‰ã‚’ã¡ã‚‡ã£ã¨è§¦ã£ã¦ã¿ãŸè¨˜äº‹ã§ã™ã€‚
ä½•ã‹æ”¹å–„ç‚¹ãªã©ã‚ã‚Œã°ã”æŒ‡æ‘˜ãã ã•ã„ ğŸ™

# çµ‚äº†å‡¦ç†ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨ã¯

> HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒãƒ–ãƒ©ã‚¦ã‚¶ã«é€ä¿¡ã•ã‚ŒãŸå¾Œã€ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒä½•ã‚‰ã‹ã®ä½œæ¥­ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§terminateãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã€Webã‚µãƒ¼ãƒãŒFastCGIã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒãƒ–ãƒ©ã‚¦ã‚¶ã«é€ä¿¡ã•ã‚ŒãŸå¾Œã€terminateãƒ¡ã‚½ãƒƒãƒ‰ãŒè‡ªå‹•çš„ã«å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚
>https://readouble.com/laravel/10.x/ja/middleware.html

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®é€ä¿¡å¾Œã«è¡Œã„ãŸã„å‡¦ç†ã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã§ã™ğŸ§

# å®Ÿéš›ã«è§¦ã£ã¦ã¿ã‚‹

## Laravelç’°å¢ƒã®æ§‹ç¯‰

Laravelã®ç’°å¢ƒã¯Laravel Sailã§æ§‹ç¯‰ã—ã¾ã™ã€‚  
ï¼ˆåˆ¥ã«MySQLã¯ä½¿ã‚ãªã„ã®ã§ã™ãŒã€ä½•ã‚‚æŒ‡å®šã—ãªã„ã¨Redisã‚„meilisearchãªã©è«¸ã€…è¿½åŠ ã•ã‚Œã¦ã—ã¾ã†ã®ã§ï¼‰
`curl -s "https://laravel.build/middleware-test?with=mysql" | bash`

`./vendor/bin/sail up`ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¾ã™ã€‚

## ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ä½œæˆ

Laravelã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«å…¥ã‚Šã€ã‚’ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ä½œæˆã—ã¾ã™ã€‚

`php artisan make:middleware TestTerminate`


## ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹

