---
title: "ã€Laravelã€‘ãƒªã‚½ãƒ¼ã‚¹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã§ã‚µã‚¯ãƒƒã¨CRUDã‚’ä½œæˆã™ã‚‹"
emoji: "ğŸ¿ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Laravel", "PHP", "Tech"]
published: true
---

# ã“ã®è¨˜äº‹ã«ã¤ã„ã¦

Laravelã®ãƒªã‚½ãƒ¼ã‚¹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ã¡ã‚‡ã£ã¨è§¦ã£ã¦ã¿ãŸè¨˜äº‹ã§ã™ã€‚
ä½•ã‹æ”¹å–„ç‚¹ãªã©ã‚ã‚Œã°ã”æŒ‡æ‘˜ãã ã•ã„ ğŸ™

# ãƒªã‚½ãƒ¼ã‚¹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ã¯

> ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®å„Eloquentãƒ¢ãƒ‡ãƒ«ã‚’ã€Œãƒªã‚½ãƒ¼ã‚¹ã€ã¨è€ƒãˆã‚‹å ´åˆã€é€šå¸¸ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®å„ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦åŒã˜ä¸€é€£ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ãŸã¨ãˆã°ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«Photoãƒ¢ãƒ‡ãƒ«ã¨Movieãƒ¢ãƒ‡ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã“ã‚Œã‚‰ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã€èª­ã¿å–ã‚Šã€æ›´æ–°ã€ã¾ãŸã¯å‰Šé™¤ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚
>ã“ã®ã‚ˆã†ãªã‚³ãƒ¢ãƒ³ãƒ»ã‚±ãƒ¼ã‚¹ã®ãŸã‚ã€Laravelãƒªã‚½ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯ã€é€šå¸¸ã®ä½œæˆã€èª­ã¿å–ã‚Šã€æ›´æ–°ã€ãŠã‚ˆã³å‰Šé™¤("CRUD")ãƒ«ãƒ¼ãƒˆã‚’ï¼‘è¡Œã®ã‚³ãƒ¼ãƒ‰ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã«å‰²ã‚Šå½“ã¦ã¾ã™ã€‚
https://readouble.com/laravel/10.x/ja/controllers.html

CRUDå‡¦ç†ã¸ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ç°¡å˜ã«ä½œæˆã—ã¦ãã‚Œã‚‹ã‚‚ã®ã®ã‚ˆã†ã§ã™ğŸ¤”

# å®Ÿè·µ

## ç’°å¢ƒæ§‹ç¯‰

Laravelã®ç’°å¢ƒã¯Laravel Sailã§æ§‹ç¯‰ã—ã¾ã™ã€‚  
ï¼ˆ`with=mysql`ã¨æŒ‡å®šã—ã¦ã„ã¾ã™ãŒã€ä½•ã‚‚æŒ‡å®šã—ãªã„ã¨Redisã‚„meilisearchãªã©è«¸ã€…è¿½åŠ ã•ã‚Œã¦ã—ã¾ã†ã®ã§ï¼‰
`curl -s "https://laravel.build/example-app?with=mysql" | bash`

`./vendor/bin/sail up`ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¾ã™ã€‚

## ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ä½œæˆ

ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ä½œæˆæ™‚ã«`--resource`ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒã™ã§ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãŒä½œæˆã•ã‚Œã¾ã™ã€‚
ä»Šå›ã¯ã€ãƒ¢ãƒ‡ãƒ«ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è‡ªå‹•ã§å–å¾—ã—ã¦ãã¦æ¬²ã—ã„ã®ã§ã€`--model`ã‚‚æŒ‡å®šã—ã¾ã™ğŸ˜º

```shell
# php artisan make:controller TestController --model=Test --resource

 â”Œ A App\Models\Test model does not exist. Do you want to generate it? â”
 â”‚ â— Yes / â—‹ No                                                        â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INFO  Model [app/Models/Test.php] created successfully.  

INFO  Controller [app/Http/Controllers/TestController.php] created successfully.  
```

Modelã‚’ä½œæˆã—ã¦ã„ãªã„å ´åˆã¯ä½œæˆã—ã¦ãã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚

â†“ã®ã‚ˆã†ãªControllerãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚

```PHP:app/Http/Controller/TestController.php
<?php

namespace App\Http\Controllers;

use App\Models\Test;
use Illuminate\Http\Request;

class TestController extends Controller
{
    /**
     * Display a listing of the resource.
     */
    public function index()
    {
        //
    }

    /**
     * Show the form for creating a new resource.
     */
    public function create()
    {
        //
    }

    /**
     * Store a newly created resource in storage.
     */
    public function store(Request $request)
    {
        //
    }

    /**
     * Display the specified resource.
     */
    public function show(Test $test)
    {
        //
    }
```

ä»–ã«ã‚‚`edit`,  `update`, `destroy`ãŒä½œæˆã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

## ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©

`routes/web.php`ã«ãƒ«ãƒ¼ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€‚

```PHP:routes/web.php
<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\TestController;

Route::resource('test', TestController::class);

```

## ç¢ºèª

`php artisan route:list`ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãƒ«ãƒ¼ãƒˆã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ğŸ˜º

```shell
# php artisan route:list

  POST            _ignition/execute-solution .................. ignition.executeSolution â€º Spatie\LaravelIgnition â€º ExecuteSolutionController
  GET|HEAD        _ignition/health-check .............................. ignition.healthCheck â€º Spatie\LaravelIgnition â€º HealthCheckController
  POST            _ignition/update-config ........................... ignition.updateConfig â€º Spatie\LaravelIgnition â€º UpdateConfigController
  GET|HEAD        api/user .................................................................................................................. 
  GET|HEAD        sanctum/csrf-cookie ..................................... sanctum.csrf-cookie â€º Laravel\Sanctum â€º CsrfCookieController@show
  GET|HEAD        test .................................................................................... test.index â€º TestController@index
  POST            test .................................................................................... test.store â€º TestController@store
  GET|HEAD        test/create ........................................................................... test.create â€º TestController@create
  GET|HEAD        test/{test} ............................................................................... test.show â€º TestController@show
  PUT|PATCH       test/{test} ........................................................................... test.update â€º TestController@update
  DELETE          test/{test} ......................................................................... test.destroy â€º TestController@destroy
  GET|HEAD        test/{test}/edit .......................................................................... test.edit â€º TestController@edit

                                                                                                                          Showing [12] routes
```

ï¼ˆä¸Šã®5ã¤ã¯ç½®ã„ã¨ã„ã¦ï¼‰ã¡ã‚ƒã‚“ã¨ãƒ«ãƒ¼ãƒˆãŒå®šç¾©ã•ã‚Œã¦ã¾ã™ã­ï¼


å®Ÿéš›ã«å‘¼ã³å‡ºã›ã‚‹ã‹ã‚‚ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚
```PHP:app/Http/Controller/TestController.php
public function index()
    {
        exit("hoge");
    }
```

![ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ç¢ºèª](https://storage.googleapis.com/zenn-user-upload/3cb1057d6e52-20240123.png)

`index`ãŒå‘¼ã³å‡ºã•ã‚Œã¦ã¾ã™ã­ï¼

# ã‚³ãƒãƒ³ãƒ‰ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚‹

ã“ã‚Œã ã‘ã ã¨ã€ã‚ã£ã•ã‚Šã—éãã¦ã„ã‚‹ã®ã§ã‚‚ã†ã¡ã‚‡ã£ã¨èª¿ã¹ã¦ã¿ã¾ã™ğŸ§

`php artisan make:controller`ã¯ã€â†“ã®å ´æ‰€ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

`vendor/laravel/framework/src/Illuminate/Routing/Console/ControllerMakeCommand.php`


ä»Šå›å®Ÿè¡Œã—ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨é–¢ä¿‚ãŒã‚ã‚Šãã†ãªç®‡æ‰€ã‚’è¦‹ã¦ã¿ã¾ã™ğŸ‘€

```PHP:/vendor/laravel/framework/src/Illuminate/Routing/Console/ControllerMakeCommand.php
protected function getStub()
    {
        $stub = null;

        if ($type = $this->option('type')) {
            $stub = "/stubs/controller.{$type}.stub";
        } elseif ($this->option('parent')) {
            $stub = $this->option('singleton')
                        ? '/stubs/controller.nested.singleton.stub'
                        : '/stubs/controller.nested.stub';
        } elseif ($this->option('model')) {
            $stub = '/stubs/controller.model.stub';
        } elseif ($this->option('invokable')) {
            $stub = '/stubs/controller.invokable.stub';
        } elseif ($this->option('singleton')) {
            $stub = '/stubs/controller.singleton.stub';
        } elseif ($this->option('resource')) {
            $stub = '/stubs/controller.stub';
        }
        (çœç•¥)
        return $this->resolveStubPath($stub);
    }
```

`model`ã®ã¨ã“ã‚ã®æ¡ä»¶å¼ãŒtrueã«ãªã‚‹ã®ã§ã€`'/stubs/controller.model.stub';`ã‚¹ã‚¿ãƒ–ï¼ˆä»Šå›ã®æ–‡è„ˆã ã¨ã€ç”Ÿæˆã™ã‚‹Controllerã®å‹ã¿ãŸã„ãªæ„Ÿã˜ã§ã™ã‹ã­â€¦ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã¿ãŸã„ã§ã™ğŸ¤”

```PHP:vendor/laravel/framework/src/Illuminate/Routing/Console/stubs/controller.model.stub
<?php

namespace {{ namespace }};

use {{ namespacedModel }};
use {{ rootNamespace }}Http\Controllers\Controller;
use {{ namespacedRequests }}

class {{ class }} extends Controller
{
    /**
     * Display a listing of the resource.
     */
    public function index()
    {
        //
    }

    (create, storeã¯çœç•¥)

    /**
     * Display the specified resource.
     */
    public function show({{ model }} ${{ modelVariable }})
    {
        //
    }
```

ä»Šå›ã¯ã€ãƒ¢ãƒ‡ãƒ«ã¨ç´ã¥ã‘ã‚‹`--model`ã‚’ä½¿ç”¨ã—ãŸãŸã‚ã€`show`ã®å¼•æ•°ã«ModelãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã™ã­ğŸ˜º

ã“ã‚Œã‚’å…ƒã«ã€æŒ‡å®šã•ã‚ŒãŸControllerã‚„Modelã®åå‰ã«ç½®ãæ›ãˆã¦ControllerãŒä½œæˆã•ã‚Œã‚‹æ„Ÿã˜ã§ã—ã‚‡ã†ã‹ã€‚

ä½•ã‚‚æŒ‡å®šã—ã¦ã„ãªã„ã¨ã€æœ€ä½é™ã®è¨˜è¿°ã ã‘ã®`controller.plain.stub`ãŒä½¿ç”¨ã•ã‚Œã‚‹ã¿ãŸã„ã§ã™ã€‚

# ãŠã‚ã‚Šã«

ä»–ã«ã‚‚ã€APIç”¨ã«HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¿”ã™ãƒ«ãƒ¼ãƒˆã‚’é™¤å¤–ã—ãŸã‚Šã€ä»»æ„ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã ã‘ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«ã§ãã‚‹ãªã©ã€è‰²ã€…ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚
ä¾¿åˆ©â€¦ãªã‚“ã§ã—ã‚‡ã†ã‹ğŸ§